# Sample workflow for building and deploying an Astro site to GitHub Pages
#
# To get started with Astro see: https://docs.astro.build/en/getting-started/
#
name: Push Git repository

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["master"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  build:
    name: Push
    runs-on: ubuntu-latest
    steps:
    - name: "Initialize Git"
      run: "git init"
    - name: "Set User Email"
      run: "git config user.email \"kamela_ae@proton.me\""
    - name: "Set User Name"
      run: "git config user.name \"Theboiboi8\""
    - name: "Stage Files"
      run: "git add -A"
    - name: "Sanity Check"
      run: "git status"
    - name: "Commit Changes"
      run: "git commit -m \"Sync with private repo\""
    - name: "Add Remote"
      run: "git remote add origin \"https://github.com/Theboiboi8/kamela.git\""
    - name: "Set Branch" 
      run: "git branch -M master"
    - name: "Push to remote" 
      run: "git push -u origin master"
